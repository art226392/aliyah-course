<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aliyah Course - Lecture 1</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="auth" class="auth-panel">
      <div id="when-signed-out">
        <input id="email" type="email" placeholder="email" />
        <input id="password" type="password" placeholder="password" />
        <button id="signup">Sign up</button>
        <button id="signin">Sign in</button>
      </div>

      <div id="when-signed-in" hidden>
        <span id="whoami">Not signed in</span>
        <button id="logout">Sign out</button>
      </div>

      <div id="auth-msg"></div>
    </div>

    <script type="module" src="/auth/init.js"></script>

    <canvas id="bg-canvas"></canvas>

    <div class="container">
      <header>
        <img
          src="cropped-ICEJ-Logo-Emblem_blue.png"
          alt="Course Logo"
          class="header-logo"
        />
        <h1>Aliyah Course</h1>
        <h2>Lecture 1: The Biblical and Historical Foundations</h2>
        <p class="author-credit">By Arthur Howard Flower Th.D.</p>
      </header>

      <main>
        <div class="lecture-text">
          <h3>INTRODUCTION</h3>

          <p>
            The return of the Jewish people to their ancestral homeland in
            Israel is a story that spans centuries, continents, and countless
            individual lives. It is a story a people and the land that God
            promised to them as an eternal inheritance. This course explores the
            biblical basis for aliyah, the historical and contemporary waves of
            Jewish immigration to Israel, and the prophetic significance of this
            ongoing ingathering.
          </p>

          <p>
            At the heart of this story is the Abrahamic Covenant, God's promise
            to bless Abraham and his descendants and to give them the land of
            Israel as an everlasting possession. This covenant is not
            conditional on the faithfulness or worthiness of the Jewish people,
            but rather on the unchanging character and purposes of God Himself.
            He is a God who keeps His promises, even when His people falter or
            stray.
          </p>

          <p>
            The return of the Jewish people to Israel, then, is not just a
            political or historical event, but a powerful demonstration of God's
            faithfulness and His sovereign plan for the redemption of the world.
            As the Apostle Paul wrote in Romans 11, the restoration of Israel is
            inextricably linked to the spiritual rebirth and blessing of the
            nations. When the Jewish people come home to Israel and turn their
            hearts back to God, it will be like "life from the dead" for the
            whole world.
          </p>

          <div class="video-container">
            <iframe
              src="https://www.youtube.com/embed/UUW-xtkLOvw?rel=0"
              title="YouTube video player"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
            ></iframe>
          </div>

          <p>
            Throughout history, there have been glimpses and foretastes of this
            great ingathering, as waves of Jewish immigrants have returned to
            Israel from the four corners of the earth. From the early pioneers
            of the First Aliyah to the survivors of the Holocaust and the
            refugees of the modern era, each generation has played its part in
            the unfolding story of restoration and redemption.
          </p>

          <p>
            Christians have a unique and significant role to play in this story.
            They are called to be advocates, intercessors, and practical
            supporters of the Jewish people as they make their way home to
            Israel. This is done not out of a sense of duty or obligation, but
            out of a deep love and appreciation for the Jewish people as God's
            chosen ones, and out of a recognition of the spiritual debt that
            Gentiles owe them as being grafted into the covenant by faith.
          </p>

          <p>
            Over the past century, the world has witnessed the miraculous
            rebirth of the State of Israel and the ongoing return of the Jewish
            people to their homeland. This modern-day Aliyah is a sign of God's
            faithfulness to His ancient promises and a sign of His unfolding
            plan of redemption for Israel and the nations.
          </p>

          <p>
            This dissertation will explore the biblical and theological
            foundations of Aliyah, tracing the theme of the ingathering of the
            exiles throughout the Old and New Testaments. It will explore the
            historical and contemporary expressions of Aliyah, from the early
            pioneers who settled the land in the late 19th century to the waves
            of immigrants who have come from the four corners of the earth in
            recent decades.
          </p>

          <p>
            Attention will also be given to the unique challenges and
            opportunities that Aliyah presents for the State of Israel and the
            Jewish people, as well as the role of Christians in supporting and
            facilitating this ongoing return. The voices of key Christian
            leaders and organizations who have been at the forefront of Aliyah
            work will be highlighted, offering insights and inspiration for all
            who desire to align themselves with God's purposes for Israel.
          </p>

          <p>
            Ultimately, this dissertation aims to show that Aliyah is not a side
            issue, but a central part of God's redemptive plan for the world. As
            the Jewish people return to their homeland and their hearts turn
            back to their God, they are setting the stage for the climactic
            events of the last days, the coming of the Messiah, and the
            establishment of His kingdom on earth.
          </p>

          <p>
            May this work stir faith, deepen understanding, and inspire action
            in all who read it. May it contribute to the hastening of that great
            day when the words of the prophet Isaiah will be fulfilled: “The
            ransomed of the Lord shall return, and come to Zion with singing,
            with everlasting joy on their heads. They shall obtain joy and
            gladness, and sorrow and sighing shall flee away” (Isaiah 35:10).
          </p>
        </div>

        <div class="navigation-buttons">
          <a href="quiz1.html" class="nav-btn">Take Assessment for Lecture 1</a>
        </div>
      </main>
    </div>

    <script src="background.js"></script>

    <div
      id="auth"
      style="
        position: fixed;
        top: 8px;
        right: 8px;
        background: #fff5;
        border: 1px solid #0002;
        padding: 8px;
        border-radius: 8px;
        backdrop-filter: blur(8px);
      "
    >
      <div id="when-signed-out">
        <input
          id="email"
          type="email"
          placeholder="email"
          style="margin-right: 4px"
        />
        <input
          id="password"
          type="password"
          placeholder="password"
          style="margin-right: 4px"
        />
        <button id="signup">Sign up</button>
        <button id="signin">Sign in</button>
      </div>
      <div id="when-signed-in" hidden>
        <span id="whoami">Not signed in</span>
        <button id="logout" style="margin-left: 8px">Sign out</button>
      </div>
      <div id="auth-msg" style="color: #b00; margin-top: 6px"></div>
    </div>

    <script type="module">
      import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";

      const supabase = createClient(
        "https://lesxabpwrsalywlnlpvp.supabase.co",
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxlc3hhYnB3cnNhbHl3bG5scHZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ3NjI3MDIsImV4cCI6MjA3MDMzODcwMn0.VXUIZfsJdnGZW8V5NGkzS-Jykel7wDWqtbKlgYxEJDI"
      );

      const el = (id) => document.getElementById(id);
      const msg = (t) => (el("auth-msg").textContent = t || "");

      async function renderFromSession() {
        const {
          data: { session },
        } = await supabase.auth.getSession();
        const user = session?.user || null;
        el("when-signed-in").hidden = !user;
        el("when-signed-out").hidden = !!user;
        el("whoami").textContent = user
          ? `Signed in as ${user.email}`
          : "Not signed in";
        msg("");
      }

      el("signup")?.addEventListener("click", async () => {
        msg("");
        try {
          const email = el("email").value.trim();
          const password = el("password").value;
          const { error } = await supabase.auth.signUp({ email, password });
          if (error) throw error;
          msg("Check your email if confirmation is required.");
        } catch (e) {
          console.error(e);
          msg(String(e.message || e));
        }
      });

      el("signin")?.addEventListener("click", async () => {
        msg("");
        try {
          const email = el("email").value.trim();
          const password = el("password").value;
          const { error } = await supabase.auth.signInWithPassword({
            email,
            password,
          });
          if (error) throw error;
          await renderFromSession();
        } catch (e) {
          console.error(e);
          msg(String(e.message || e));
        }
      });

      el("logout")?.addEventListener("click", async () => {
        await supabase.auth.signOut();
        await renderFromSession();
      });

      supabase.auth.onAuthStateChange((_e, _s) => renderFromSession());
      renderFromSession();

      // Call this when a quiz finishes
      export async function saveProgress(lecture, score, passed) {
        const {
          data: { user },
        } = await supabase.auth.getUser();
        if (!user) throw new Error("Sign in to save progress");
        const { error } = await supabase.from("quiz_progress").upsert({
          user_id: user.id,
          lecture,
          score,
          passed,
          updated_at: new Date().toISOString(),
        });
        if (error) throw error;
      }

      export async function loadMyProgress() {
        const {
          data: { user },
        } = await supabase.auth.getUser();
        if (!user) return [];
        const { data, error } = await supabase
          .from("quiz_progress")
          .select("*")
          .order("lecture", { ascending: true });
        if (error) throw error;
        return data;
      }
    </script>
    <!-- one-time disclaimer -->
    <div id="disclaimer" class="modal-backdrop">
      <div class="modal-card">
        <h3>Quick note</h3>
        <p>
          We strongly recommend watching the full lecture video, not just
          skimming the text. It makes the quizzes easier and the material
          actually sticks.
        </p>
        <div class="modal-actions">
          <button id="disclaimer-accept" class="primary">Continue</button>
        </div>
      </div>
    </div>

    <!-- centered auth modal -->
    <div id="auth-modal" class="modal-backdrop">
      <div class="modal-card">
        <h3>Sign in to save your progress</h3>
        <div id="when-signed-out">
          <input
            id="email"
            type="email"
            placeholder="Email"
            style="margin-bottom: 8px"
          />
          <input id="password" type="password" placeholder="Password" />
          <div class="modal-actions">
            <button id="signup" class="secondary">Sign up</button>
            <button id="signin" class="primary">Sign in</button>
          </div>
        </div>
        <div id="when-signed-in" hidden>
          <p id="whoami">Not signed in</p>
          <div class="modal-actions">
            <button id="logout" class="secondary">Sign out</button>
            <button id="auth-close" class="primary">Close</button>
          </div>
        </div>
        <div id="auth-msg"></div>
      </div>
    </div>

    <script type="module" src="/auth/init.js"></script>
  </body>
</html>
